function trackDigests(e){e.run(["$rootScope",function(e){Promise.setScheduler(function(t){e.$evalAsync(t)})}])}var app=angular.module("app",["ngSanitize","ui.bootstrap","angularUtils.directives.dirDisqus","ngTagsInput","ngFileUpload","toastr","ngDialog","ui.select","ngTable","LocalStorageModule"]).config(["$locationProvider",function(e){e.html5Mode({enabled:!0})}]);trackDigests(app),angular.module("app").directive("createAccountScope",["$rootScope","$http",function(e,t){return{restrict:"AE",link:function(n){function o(o){return t.post("/createAccount",o).then(function(t){return t=t.data,e.main.responseStatusHandler(t),!0})["catch"](function(t){return t=t.data,e.main.responseStatusHandler(t),n.registrationDetails.password1="",n.registrationDetails.password2="",!0})}n.createMain={isBusy:!1},n.registrationDetails={email:"",firstName:"",lastName:"",username:"",password1:"",password2:""},n.createAccount=function(e){return n.createMain.isBusy=!0,o(n.registrationDetails,e).then(function(){n.createMain.isBusy=!1})}}}}]),angular.module("app").directive("resetPasswordScope",["$rootScope","$http",function(e,t){return{restrict:"AE",link:function(n){n.resetMain={isBusy:!1},n.resetFormModel={email:"",newPassword:"",confirmNewPassword:""},n.submitResetPasswordEmail=function(){return n.resetMain.isBusy=!0,t.post("/api/resetPassword/email",n.resetFormModel).then(function(t){t=t.data,e.main.responseStatusHandler(t)})["catch"](function(t){t=t.data,e.main.responseStatusHandler(t),n.resetFormModel.email="",n.resetFormModel.newPassword="",n.resetFormModel.confirmNewPassword="",n.resetMain.isBusy=!1})}}}}]),angular.module("app").directive("signInScope",["$rootScope","$http",function(e,t){return{restrict:"AE",link:function(n){function o(o,r){return Promise.resolve().then(function(){return r?t.post("/localUserLogin?lastpage="+document.referrer,o):t.post("/localUserLogin",o)}).then(function(t){return t=t.data,e.main.responseStatusHandler(t),!0})["catch"](function(t){return t=t.data,n.loginFormModel.password="",e.main.responseStatusHandler(t),!0})}n.signInMain={isBusy:!1},n.loginFormModel={username:"",password:""},n.submitLocalLoginForm=function(e){return n.signInMain.isBusy=!0,o(n.loginFormModel,e).then(function(){n.signInMain.isBusy=!1})}}}}]),angular.module("app").directive("imageAdDirective",["$rootScope","$http",function(e,t){return{restrict:"AE",link:function(n,o,r){function a(){Promise.resolve().then(function(){return t.post("/ad/imageAdHtml",{size:i})["catch"](function(t){throw t=t.data,e.main.responseStatusHandler(t),t}).then(function(t){return t=t.data,e.main.responseStatusHandler(t),t})}).then(function(e){o.empty(),o.append(e)})["catch"](function(e){console.log(e)})}var i=r.adsize.toString(),u=s.words(r.display),c=$(window).width();c>=1200&&u.indexOf("lg")>-1?a():c>=992&&1200>c&&u.indexOf("md")>-1?a():c>=768&&992>c&&u.indexOf("sm")>-1?a():768>c&&u.indexOf("xs")>-1&&a()}}}]),angular.module("app").config(["localStorageServiceProvider",function(e){e.setPrefix("app").setStorageCookieDomain(-1!==document.location.hostname.search("africanexponent")?"africanexponent.com":"").setStorageType("localStorage")}]),angular.module("app").controller("UniversalController",["$filter","$window","$location","$scope","$rootScope","ngDialog","$anchorScroll","$sce","localStorageService","$http",function(e,t,n,o,r,s,a,i,u,c){function l(){return-1!==document.location.hostname.search("africanexponent")?"//www.africanexponent.com":-1!==document.location.hostname.search("amazonaws")?"//ec2-54-85-41-117.compute-1.amazonaws.com:3000":n.port()?"http://localhost:"+n.port():"http://localhost"}r.main={userLocationData:null,getUserLocationData:function(){Promise.resolve().then(function(){return new Promise(function(e,t){function n(){function n(t){var n={country:t.address.country};r.main.saveKeyToCookie("userLocation",n,1),e(!0)}function o(e){var n={country:null};r.main.saveKeyToCookie("userLocation",n,1),t(e)}geolocator.locateByIP(n,o,2)}if(r.main.checkCookieIsEnabled()){var o;(o=r.main.getKeyFromCookie("userLocation",604800))&&o.hasOwnProperty("country")&&o.country?e(!0):n()}else{console.log("Cookie not supported");var s={country:null};r.main.saveKeyToCookie("userLocation",s,7),e(!0)}})})["catch"](function(e){if(!e.msg)throw e;console.log(e.msg)})["catch"](function(e){console.log(e)})},checkLocalStorageSupport:function(){return u.isSupported?!0:!1},checkCookieIsEnabled:function(){return u.cookie.isSupported?!0:!1},saveToLocalStorage:function(e,t){var n={value:t,timestamp:(new Date).getTime()};return u.set(e,n)},getFromLocalStorage:function(e,t){if(t||(t=86400),r.main.checkIfExistsOnLocalStorage(e)){var n=u.get(e),o=n.timestamp,s=(new Date).getTime().toString();return s-o>1e3*t?(r.main.removeFromLocalStorage([e]),!1):n.value}return!1},saveKeyToCookie:function(e,t,n){n||(n=2);var o={value:t,timestamp:(new Date).getTime()};return o=JSON.stringify(o),u.cookie.set(e,o,n)},getKeyFromCookie:function(e,t){t||(t=86400);var n=u.cookie.get(e);if(n){var o=n.timestamp,s=(new Date).getTime().toString();return s-o>1e3*t?(r.main.removeKeyFromCookie(e),!1):n.value}return!1},checkIfExistsOnLocalStorage:function(e){for(var t=u.keys(),n=t.length,o=!1,r=0;n>r;r++)if(t[r]==e){o=!0;break}return o},removeFromLocalStorage:function(e,t){return t?u.clearAll():(e.forEach(function(e){u.remove(e)}),!0)},removeKeyFromCookie:function(e){return u.cookie.remove(e)},windowWidth:$(window).width(),bootStrapWidth:function(e){return e=parseInt(e),e>=1200?"lg":e>=992&&1200>e?"md":e>=768&&992>e?"sm":768>e?"xs":void 0},trustAsHtml:function(e){return i.trustAsHtml(e)},intersectionArray:function(e,t){return _.intersection(e,t)},getAmazonS3Url:function(e){var t="https://assets.africanexponent.com/";return t+e},defaultProfilePicture:"/public/imgsmin/default_avatar/default_avatar_red_462_462.png",isAdmin:function(e){var t=[77,100,101];return 0===e.adminLevels.length?!1:_.intersection(e.adminLevels,t).length>0},assetsDomainWithSlash:function(){return"https://assets.africanexponent.com/"},goToTop:function(){n.hash("pageTop"),a()},back:function(){r.back()},responseStatusHandler:function(t){e("responseFilter")(t)},showToast:function(e,t){r.showToast(e,t)},clearBanners:function(){r.$broadcast("clearBanners")},redirectToAbout:function(){t.location.href="/about"},redirectToLogin:function(){t.location.href="/notLoggedIn"},reloadPage:function(){t.location.reload()},redirectToHome:function(){t.location.href="/"},redirectToPage:function(e){t.location.href=l()+e},redirectToPreviousPage:function(){window.location.href=document.referrer},showExecuting:function(e){var t;return t=e&&"string"==typeof e&&0!==e.length?e+"...":"Performing action...",s.open({data:{message:t},templateUrl:"views/dialogs/executing.html",className:"ngdialog-theme-default",overlay:!0,showClose:!1,closeByEscape:!1,closeByDocument:!1,cache:!0,trapFocus:!1,preserveFocus:!0})}},r.main.getUserLocationData(),r.back=function(){window.history.back()}}]),angular.module("app").directive("resendEmailScope",["$rootScope","$http",function(e,t){return{restrict:"AE",link:function(n){function o(e){return t.post("/resendConfirmationEmail",{userUniqueCuid:e})}n.resendConfirmationEmail=function(t){var n=e.main.showExecuting("Sending Email");o(t).success(function(t){n.close(),e.main.responseStatusHandler(t)}).error(function(t){n.close(),e.main.responseStatusHandler(t)})}}}}]),angular.module("app").filter("responseFilter",["$q","$log","$window","$rootScope","ngDialog",function(e,t,n,o,r){return function(e){function s(e,t,n){return{show:e?!0:!1,bannerClass:t,msg:n}}function a(){r.open({template:"/dialog/not-authorized.html",className:"ngdialog-theme-default",overlay:!0,showClose:!1,closeByEscape:!0,closeByDocument:!0,cache:!1,trapFocus:!0,preserveFocus:!0})}function i(e){r.openConfirm({data:{message:e},template:"/dialog/sign-in.html",className:"ngdialog-theme-default",overlay:!0,showClose:!1,closeByEscape:!1,closeByDocument:!1,cache:!0,trapFocus:!0,preserveFocus:!0}).then(function(){o.main.redirectToPage("/notLoggedIn")},function(){o.main.redirectToPage("/about")})}if(null!==e&&"object"==typeof e){if(e.redirect&&e.redirectPage&&(n.location.href=e.redirectPage),e.reload&&o.main.reloadPage(),e.notify&&e.type&&e.msg&&o.showToast(e.type,e.msg),e.dialog&&e.id)switch(e.id){case"not-authorized":a();break;case"sign-in":i(e.msg)}e.banner&&e.bannerClass&&e.msg&&o.$broadcast("universalBanner",s(!0,e.bannerClass,e.msg)),e.signInBanner&&e.bannerClass&&e.msg&&o.$broadcast("signInBanner",s(!0,e.bannerClass,e.msg)),e.registrationBanner&&e.bannerClass&&e.msg&&o.$broadcast("registrationBanner",s(!0,e.bannerClass,e.msg)),e.reason&&t.warn(e.reason)}return!0}}]),angular.module("app").factory("globals",["$location","$http",function(e,t){var n={};return{userData:function(e){return e?n=e:n},userDataFromServer:function(){return t.get("/api/getUserData")},getLocationHost:function(){return-1!==document.location.hostname.search("africanexponent")?"//www.africanexponent.com":-1!==document.location.hostname.search("amazonaws")?"//ec2-54-85-41-117.compute-1.amazonaws.com:3000":e.port()?"http://localhost:"+e.port():"http://localhost"}}}]),angular.module("app").directive("toastrDirective",["$rootScope","toastr",function(e,t){return{restrict:"AE",link:function(){e.showToast=function(e,n){switch(e){case"success":t.clear(),t.success(n);break;case"warning":t.clear(),t.warning(n,"Warning",{closeButton:!0,tapToDismiss:!0});break;case"error":t.clear(),t.error(n,"Error",{closeButton:!0,tapToDismiss:!0,timeOut:!1});break;default:t.clear()}},e.clearToasts=function(){t.clear()}}}}]).directive("signInBannerScope",["$rootScope",function(e){return{restrict:"AE",link:function(t){t.signInBanner={show:!1,bannerClass:"",msg:""},e.$on("signInBanner",function(e,n){t.signInBanner=n}),e.$on("clearBanners",function(){t.signInBanner={show:!1,bannerClass:"",msg:""}})}}}]).directive("registrationBannerScope",["$rootScope",function(e){return{restrict:"AE",link:function(t){t.registrationBanner={show:!1,bannerClass:"",msg:""},e.$on("registrationBanner",function(e,n){t.registrationBanner=n}),e.$on("clearBanners",function(){t.registrationBanner={show:!1,bannerClass:"",msg:""}})}}}]),angular.module("app").directive("universalBannerScope",["$rootScope","globals",function(e){return{restrict:"AE",link:function(t){t.universalBanner={show:!1,bannerClass:"",msg:""},e.$on("universalBanner",function(e,n){t.universalBanner=n}),e.$on("clearBanners",function(){t.universalBanner={show:!1,bannerClass:"",msg:""}})}}}]),angular.module("app").directive("postTopicScope",["$rootScope","$http",function(e,t){return{restrict:"AE",link:function(n){function o(t){n.mainTopicModel={topic:n.theModel.topic,requestedPage:t},n.mainTopicModel.topic&&n.mainTopicModel.requestedPage&&(n.buttonLoading(),r(n.mainTopicModel).success(function(t){e.main.responseStatusHandler(t),n.theModel.pageNumber++,angular.element("#appendNextPosts").replaceWith(t),n.finishedLoading()}).error(function(t){e.main.responseStatusHandler(t),n.finishedLoading()}))}function r(e){var n=e.topic,o=e.requestedPage;return t.get("/partial/topic/"+n+"?page="+parseInt(o))}n.theModel=JSON.parse(n.model),n.showMore=function(){o(parseInt(n.theModel.pageNumber)+1)},n.buttonLoading=function(){$("#showMoreBtn").button("loading")},n.finishedLoading=function(){$("#showMoreBtn").button("reset")}}}}]),angular.module("app").controller("UserManagerController",["$q","$scope","$rootScope","UserService","globals",function(e,t,n,o){function r(){o.getUsersCountFromServer().success(function(e){t.usersCount=o.updateUsersCount(e.usersCount),n.main.responseStatusHandler(e)}).error(function(e){n.main.responseStatusHandler(e)})}t.usersCount=o.getUsersCount(),r()}]),angular.module("app").factory("PostCategoryService",["$http","$rootScope",function(e,t){var n={};return{getAllPostCategories:function(){return n},getAllPostCategoriesFromServer:function(){return e.post("/api/category/posts/all",{})},updateAllPostCategories:function(e){return n=e,t.$broadcast("postCategoryChanges"),n}}}]),angular.module("app").factory("PostService",["$filter","$http",function(e,t){return{getCurrentEditPostModelFromServer:function(e){return t.post("/api/getPost",{postIndex:e})},submitNewPost:function(e){return t.post("/api/newPost",{newPost:e})},submitPostUpdate:function(e){return t.post("/api/updatePost",{postUpdate:e})},trashPost:function(e){return t.post("/api/trashPost",{postUniqueCuid:e})},unTrashPost:function(e){return t.post("/api/unTrashPost")}}}]),angular.module("app").factory("UserService",["$filter","$http",function(e,t){var n={},o=[],r=[],s=[],a=[];return{getUsersCount:function(){return n},getUsersCountFromServer:function(){return t.post("/api/getUsersCount",{})},updateUsersCount:function(e){return n=e},getAllUsers:function(){return o},getAllUsersFromServer:function(){return t.post("/api/getAllUsers",{})},updateAllUsers:function(e){return o=e},getAdminUsers:function(){return r},getAdminUsersFromServer:function(){return t.post("/api/getAdminUsers",{})},updateAdminUsers:function(e){return r=e},getUsersNotApproved:function(){return s},getUsersNotApprovedFromServer:function(){return t.post("/api/getUsersNotApproved",{})},updateUsersNotApproved:function(e){return s=e},getBannedUsers:function(){return a},getBannedUsersFromServer:function(){return t.post("/api/getBannedUsers",{})},updateBannedUsers:function(e){return a=e},addAdminPrivileges:function(e){return t.post("/api/addAdminPrivileges",{userUniqueCuid:e})},removeAdminPrivileges:function(e){return t.post("/api/removeAdminPrivileges",{userUniqueCuid:e})},approveUser:function(e){return t.post("/api/approveUser",{userUniqueCuid:e})},banUser:function(e){return t.post("/api/banUser",{userUniqueCuid:e})},unBanUser:function(e){return t.post("/api/unBanUser",{userUniqueCuid:e})}}}]),angular.module("app").filter("getSlugUrl",[function(){return function(e){function t(e){return e.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}var n=t(e.postShortHeading);return n+"-"+e.postIndex}}]),angular.module("app").filter("validatePostHeading",["$rootScope",function(e){return function(t,n){function o(t,o){n&&e.main.showToast(t,o)}var r=0;return t?(0==t.length&&(r++,o("warning","The heading is required")),0==r&&t.length<10&&(o("warning","The minimum required length of the heading is 10 characters"),r++)):(r++,o("warning","The heading is required")),0==r}}]).filter("postHeadingMessages",[function(){return function(e){function t(e){n?n=n+": "+e:n+=e}var n="";if(e){var o=$("<div>"+e+"</div>").text();0==o.length&&t("This is a required field"),o.length>0&&o.length<10&&t("Minimum length required is 10 characters")}else t("This is a required field");return n}}]).filter("validatePostShortHeading",["$rootScope",function(e){return function(t,n){function o(t,o){n&&e.main.showToast(t,o)}var r=0;return t?(0==t.length&&(r++,o("warning","The short heading is required")),0==r&&t.length<10&&(o("warning","The minimum required length of the short heading is 10 characters"),r++),0==r&&t.length>60&&(o("warning","The maximum allowed length of the short heading is 60 characters"),r++)):(r++,o("warning","The short heading is required")),0==r}}]).filter("postShortHeadingMessages",[function(){return function(e){function t(e){n?n=n+": "+e:n+=e}var n="";if(e){var o=$("<div>"+e+"</div>").text();0==o.length&&t("The is a required field"),o.length>0&&o.length<10&&t("Minimum length required is 10 characters"),o.length>60&&t("This heading cannot exceed 60 characters")}else t("This is a required field");return n}}]).filter("validatePostContent",["$rootScope",function(e){return function(t,n){function o(t,o){n&&e.main.showToast(t,o)}if(t){var r=$("<div>"+t+"</div>").text();return 0==r.length&&o("warning","Please add some text to the post first"),r.length>0}return o("warning","Please add some text to the post first"),!1}}]).filter("postContentMessages",[function(){return function(e){if(e){var t=$("<div>"+e+"</div>").text();return 0==t.length?"This is a required field":""}return"This is a required field"}}]).filter("validatePostSummary",["$rootScope",function(e){return function(t,n){function o(t,o){n&&e.main.showToast(t,o)}var r=0;if(t){var s=$("<div>"+t+"</div>").text();0==s.length&&(r++,o("warning","The post summary cannot be empty")),0==r&&s.length>250&&(r++,o("warning","The post summary cannot exceed 250 characters"))}else r++,o("warning","The post summary cannot be empty");return 0==r}}]).filter("postSummaryMessages",[function(){return function(e){function t(e){n?n=n+": "+e:n+=e}var n="";if(e){var o=$("<div>"+e+"</div>").text();0==o.length&&t("The post summary cannot be empty"),o.length>250&&t("The post summary cannot exceed 250 characters")}else t("The post summary cannot be empty");return n}}]).filter("validatePostTags",["$rootScope",function(e){return function(t,n){function o(t,o){n&&e.main.showToast(t,o)}var r=0,s=0;return t?(t.forEach(function(e){s++,e&&e.text&&(0==r&&e.text.length<3&&(r++,o("warning","Minimum required length for each tag is 3 characters")),0==r&&e.text.length>30&&(r++,o("warning","Maximum allowed length for each tag is 30 characters")))}),0==r&&(1>s&&(r++,o("warning","Every post should have at least one tag")),s>5&&(r++,o("warning","Only a maximum of 5 tags are allowed per post")))):(r++,o("warning","Every post should have at least one tag")),0==r}}]).filter("postTagsMessages",[function(){return function(e){function t(e){n?n=n+": "+e:n+=e}var n="",o=0;return e&&(e.forEach(function(e){o++,e&&e.text&&(e.text.length<3&&t("Minimum required length for each tag is 3 characters"),e.text.length>30&&t("Maximum allowed length for each tag is 30 characters"))}),o>5&&t("Only a maximum of 5 tags are allowed per post")),n}}]),angular.module("app").directive("ckEditor",function(){return{require:"?ngModel",link:function(e,t,n,o){var r=CKEDITOR.replace(t[0]);o&&(r.on("pasteState",function(){e.$apply(function(){o.$setViewValue(r.getData())})}),o.$render=function(e){r.setData(o.$viewValue)})}}}),angular.module("app").directive("adminUsers",["$q","$log","$rootScope","UserService","globals",function(e,t,n,o,r){return{templateUrl:"admin_users.html",restrict:"AE",link:function(e,t,r){function s(){o.getAdminUsersFromServer().success(function(t){e.adminUsers=o.updateAdminUsers(t.usersArray),n.main.responseStatusHandler(t)}).error(function(e){n.main.responseStatusHandler(e)})}e.adminUsersModel={filterString:""},e.adminUsers=o.getAdminUsers(),s(),n.$on("userChanges",function(){s()}),n.$on("reconnect",function(){})}}}]),angular.module("app").directive("allUsers",["$q","$log","$rootScope","UserService","globals",function(e,t,n,o,r){return{templateUrl:"all_users.html",restrict:"AE",link:function(e,t,r){function s(){o.getAllUsersFromServer().success(function(t){e.allUsers=o.updateAllUsers(t.usersArray),n.main.responseStatusHandler(t)}).error(function(e){n.main.responseStatusHandler(e)})}e.allUsersModel={filterString:""},e.allUsers=o.getAllUsers(),s(),n.$on("userChanges",function(){s()}),n.$on("reconnect",function(){})}}}]),angular.module("app").directive("bannedUsers",["$q","$log","$rootScope","UserService","globals",function(e,t,n,o,r){return{templateUrl:"banned_users.html",restrict:"AE",link:function(e,t,r){function s(){o.getBannedUsersFromServer().success(function(t){e.bannedUsers=o.updateBannedUsers(t.usersArray),n.main.responseStatusHandler(t)}).error(function(e){n.main.responseStatusHandler(e)})}e.bannedUsersModel={filterString:""},e.bannedUsers=o.getBannedUsers(),s(),n.$on("userChanges",function(){s()}),n.$on("reconnect",function(){})}}}]),angular.module("app").directive("unApprovedUsers",["$q","$log","$rootScope","UserService","globals",function(e,t,n,o,r){return{templateUrl:"unApproved_users.html",restrict:"AE",link:function(e,t,r){function s(){o.getUsersNotApprovedFromServer().success(function(t){e.usersNotApproved=o.updateUsersNotApproved(t.usersArray),n.main.responseStatusHandler(t)}).error(function(e){n.main.responseStatusHandler(e)})}e.usersNotApprovedModel={filterString:""},e.usersNotApproved=o.getUsersNotApproved(),s(),n.$on("userChanges",function(){s()}),n.$on("reconnect",function(){})}}}]),angular.module("app").directive("userDisplay",["$rootScope","UserService","$http",function(e,t,n){return{templateUrl:"user_display.html",restrict:"AE",scope:{user:"="},link:function(o,r,s){o.isCollapsed=!0,o.resendConfirmationEmail=function(t){function o(e){return n.post("/resendConfirmationEmail",{userUniqueCuid:e})}var r=e.main.showExecuting("Sending Email");o(t).success(function(t){r.close(),e.main.responseStatusHandler(t)}).error(function(t){r.close(),e.main.responseStatusHandler(t)})},o.addAdminPrivileges=function(n){t.addAdminPrivileges(n).success(function(t){e.$broadcast("userChanges"),e.main.responseStatusHandler(t)}).error(function(t){e.main.responseStatusHandler(t)})},o.removeAdminPrivileges=function(n){t.removeAdminPrivileges(n).success(function(t){e.$broadcast("userChanges"),e.main.responseStatusHandler(t)}).error(function(t){e.main.responseStatusHandler(t)})},o.approveUser=function(n){t.approveUser(n).success(function(t){e.$broadcast("userChanges"),e.main.responseStatusHandler(t)}).error(function(t){e.main.responseStatusHandler(t)})},o.banUser=function(n){t.banUser(n).success(function(t){e.$broadcast("userChanges"),e.main.responseStatusHandler(t)}).error(function(t){e.main.responseStatusHandler(t)})},o.unBanUser=function(n){t.unBanUser(n).success(function(t){e.$broadcast("userChanges"),e.main.responseStatusHandler(t)}).error(function(t){e.main.responseStatusHandler(t)})}}}}]),angular.module("app").controller("userPermissionsController",["$rootScope","$scope","ngTableParams","$http",function(e,t,n,o){function r(n){return Promise.resolve().then(function(){return t.main.getAllPermissions().success(function(n){e.main.responseStatusHandler(n),t.main.permissions=n.permissions}).error(function(t){throw e.main.responseStatusHandler(t),{code:600}})}).then(function(){return n.query||(n.query="all"),n.requestedPage||(n.requestedPage=1),n.quantity||(n.quantity=10),o.post("/api/searchUsers",{query:n.query,requestedPage:n.requestedPage,quantity:n.quantity}).then(function(t){return t=t.data,e.main.responseStatusHandler(t),t})["catch"](function(t){return t=t.data,console.log(t),e.main.responseStatusHandler(t),null})})["catch"](function(e){return null})}t.main={users:[],userData:{},loadingUser:!1,searchModel:{query:""},getUserData:function(){return Promise.resolve().then(function(){return t.main.loadingUser=!0,o.get("/api/getUserData")}).then(function(n){n=n.data,n.userData?t.main.userData=n.userData:e.main.redirectToLogin(),t.main.loadingUser=!1})},getUserWithUniqueCuid:function(n){return t.main.loadingUser=!0,o.post("/api/getUserWithUniqueCuid",{uniqueCuid:n}).then(function(n){return n=n.data,e.main.responseStatusHandler(n),t.main.loadingUser=!1,n.userData?n.userData:{}})["catch"](function(e){throw e=e.data,t.main.loadingUser=!1,e})},permissions:{},getAllPermissions:function(){return o.post("/api/getAllUserPermissions")},userPermissionsModel:{},prepareUserPermissionsModel:function(e){var n=e.adminLevels;return Promise.resolve().then(function(){for(var o in t.main.permissions)t.main.permissions.hasOwnProperty(o)&&(n.indexOf(parseInt(o))>-1?(t.main.userPermissionsModel[o]={},t.main.userPermissionsModel[o].isChecked=!0):(t.main.userPermissionsModel[o]={},t.main.userPermissionsModel[o].isChecked=!1));return e})},userToDisplay:{},changeUserToDisplay:function(n){return Promise.resolve().then(function(){return t.main.getUserData()}).then(function(){return t.main.getUserWithUniqueCuid(n)}).then(function(e){return t.main.prepareUserPermissionsModel(e)}).then(function(e){t.main.userToDisplay=e})["catch"](function(t){e.main.responseStatusHandler(t),console.log(t)})}},t.tableParams=new n({page:1,count:10},{total:0,counts:[10,20,40,80],getData:function(e,n){r({query:t.main.searchModel.query,requestedPage:n.page(),quantity:n.count()}).then(function(o){if(o){var r=o.resultObj;n.total(r.totalResults),n.page(r.page),t.main.users=r.users,e.resolve(t.main.users)}else t.main.users=[],n.page(1),e.resolve(t.main.users)})}})}]).directive("userDirective",["$rootScope","$http",function(e,t){return{restrict:"AE",link:function(n,o,r){n.updateUserPermissions=function(o,r){return n.main.loadingUser=!0,Promise.resolve().then(function(){return new Promise(function(e,t){if(r){var n=[];for(var o in r)r.hasOwnProperty(o)&&r[o].isChecked&&n.push(parseInt(o));e(n)}else t({code:600,err:"userPermissionsModel = "+r})})}).then(function(e){return t.post("/api/updateUserPermissions",{userUniqueCuid:o,newPermissionsArray:e}).then(function(e){return e=e.data})["catch"](function(e){throw e=e.data})}).then(function(t){return e.main.responseStatusHandler(t),n.main.changeUserToDisplay(o)})["catch"](function(t){e.main.responseStatusHandler(t),console.log(t)})},n.resetPermissionChanges=function(e){return n.main.changeUserToDisplay(e)}}}}]).directive("userActions",["$rootScope","$http","UserService","ngDialog",function(e,t,n,o){return{restrict:"AE",link:function(r,s,a){r.approveUser=function(t){n.approveUser(t).success(function(n){e.$broadcast("userChanges"),e.main.responseStatusHandler(n),r.main.changeUserToDisplay(t)}).error(function(n){e.main.responseStatusHandler(n),r.main.changeUserToDisplay(t)})},r.banUser=function(t){n.banUser(t).success(function(n){e.$broadcast("userChanges"),e.main.responseStatusHandler(n),r.main.changeUserToDisplay(t)}).error(function(n){e.main.responseStatusHandler(n),r.main.changeUserToDisplay(t)})},r.unBanUser=function(t){n.unBanUser(t).success(function(n){e.$broadcast("userChanges"),e.main.responseStatusHandler(n),r.main.changeUserToDisplay(t)}).error(function(n){e.main.responseStatusHandler(n),r.main.changeUserToDisplay(t)})},r.deleteUser=function(n){return Promise.resolve().then(function(){return o.openConfirm({template:"/views/dialogs/confirm-delete-user.html",className:"ngdialog-theme-default",overlay:!0,showClose:!1,closeByEscape:!1,closeByDocument:!1,cache:!0,trapFocus:!0,preserveFocus:!0})})["catch"](function(){throw r.main.showToast("success","Deletion cancelled"),{code:600}}).then(function(){return t.post("/api/deleteUser",{userUniqueCuid:n})["catch"](function(t){throw t=t.data,e.main.responseStatusHandler(t),t}).then(function(t){return t=t.data,e.main.responseStatusHandler(t),t})}).then(function(){e.main.reloadPage()})["catch"](function(e){console.log(e)})}}}}]),angular.module("app").directive("usersCount",["$q","$log","$rootScope","globals",function(e,t,n,o){return{templateUrl:"user_statistics.html",restrict:"AE",link:function(e,t,o){n.$on("userChanges",function(){})}}}]),angular.module("app").directive("changePostCategoryScope",["$rootScope","$http","ngDialog","ngTableParams",function(e,t,n,o){return{restrict:"AE",link:function(r,s,a){function i(n){return Promise.resolve().then(function(){return n.postCategoryUniqueCuid||(n.postCategoryUniqueCuid="abc"),n.requestedPage||(n.requestedPage=1),n.quantity||(n.quantity=10),t.post("/api/getPostsInCategory",{postCategoryUniqueCuid:n.postCategoryUniqueCuid,requestedPage:n.requestedPage,quantity:n.quantity}).then(function(t){return t=t.data,e.main.responseStatusHandler(t),t})["catch"](function(t){return t=t.data,console.log(t),e.main.responseStatusHandler(t),null})}).then(function(e){return e})["catch"](function(t){return console.log(t),e.showToast("warning",t.msg||"An error occurred, Please try again"),null})}r.categoryModel={categoryDetails:{},categoryPosts:[],postsToChange:[]},r.categoryPostsTableParams=new o({page:1,count:10},{total:0,counts:[10,20,40,80],getData:function(e,t){i({postCategoryUniqueCuid:r.categoryModel.categoryDetails.postCategoryUniqueCuid,requestedPage:t.page(),quantity:t.count()}).then(function(n){if(n){var o=n.resObj;t.total(o.totalResults),t.page(o.page),r.categoryModel.categoryPosts=o.posts,e.resolve(r.categoryModel.categoryPosts)}else r.categoryModel.categoryPosts=[],t.page(1),e.resolve(r.categoryModel.categoryPosts)})}}),r.loadUncategorizedPosts=function(){var n=r.main.showExecuting("Loading");t.post("/api/getPostsWithNoCategory").success(function(t){n.close(),e.main.responseStatusHandler(t),r.categoryModel.categoryPosts=t.postsArray,r.categoryModel.categoryDetails={}}).error(function(t){n.close(),e.main.responseStatusHandler(t)})},r.selectAll=function(){r.categoryModel.categoryPosts.forEach(function(e,t){e.isChecked=!0})},r.unselectAll=function(){r.categoryModel.categoryPosts.forEach(function(e,t){e.isChecked=!1})},r.moveSelected=function(){function o(n){var o=r.main.showExecuting("Saving");return t.post("/api/multiChangePostCategory",{postUniqueCuidArray:r.categoryModel.postsToChange,postCategoryUniqueCuid:n}).success(function(t){o.close(),e.main.responseStatusHandler(t),r.categoryModel.postsToChange=[],r.getAllPostCategories()}).error(function(t){o.close(),e.main.responseStatusHandler(t)})}r.categoryModel.categoryPosts.forEach(function(e,t){e.isChecked&&r.categoryModel.postsToChange.push(e.postUniqueCuid)}),r.categoryModel.postsToChange.length>0?n.openConfirm({data:{allCategories:r.allPostCategories.allPostCategoriesData},template:"move_category_select_destination",className:"ngdialog-theme-default",overlay:!0,showClose:!0,closeByEscape:!0,closeByDocument:!0,cache:!0,trapFocus:!0,preserveFocus:!0}).then(function(e){o(e)},function(){r.main.showToast("success","Move cancelled")}):r.main.showToast("warning","Please select posts to move")}}}}]),angular.module("app").directive("postCategoryActionsScope",["$q","$log","$rootScope","$http","globals","ngDialog",function(e,t,n,o,r,s){return{restrict:"AE",link:function(e,t,r){e.categoryNameModel={name:""},e.addPostCategory=function(){if(e.categoryNameModel.name.length>0){var t=e.main.showExecuting("Adding");o.post("/api/newPostCategory",e.categoryNameModel).success(function(o){t.close(),n.main.responseStatusHandler(o),e.categoryNameModel.name="",e.getAllPostCategories()}).error(function(e){t.close(),n.main.responseStatusHandler(e)})}else n.main.showToast("warning","Please enter the category name")},e.editPostCategoryName=function(t,r){function a(r){var s=e.main.showExecuting("Saving");o.post("/api/editPostCategoryName",{updatedPostCategoryName:r,postCategoryUniqueCuid:t}).success(function(t){n.main.responseStatusHandler(t),s.close(),e.getAllPostCategories()}).error(function(e){s.close(),n.main.responseStatusHandler(e)})}s.openConfirm({data:{postCategoryName:r},template:"edit_post_category_name",className:"ngdialog-theme-default",overlay:!0,showClose:!0,closeByEscape:!0,closeByDocument:!0,cache:!0,trapFocus:!0,preserveFocus:!0}).then(function(t){t&&t.length>0?a(t):e.main.showToast("warning","Please enter a name")},function(){e.main.showToast("success","Edit cancelled")})},e.deletePostCategory=function(t,r){function a(){var r=e.main.showExecuting("Deleting");o.post("/api/deletePostCategory",{postCategoryUniqueCuid:t}).success(function(t){r.close(),n.main.responseStatusHandler(t),e.categoryNameModel.name="",e.getAllPostCategories()}).error(function(e){r.close(),n.main.responseStatusHandler(e)})}s.openConfirm({data:{postCategoryName:r},template:"confirm_delete_post_category",className:"ngdialog-theme-default",overlay:!0,showClose:!0,closeByEscape:!0,closeByDocument:!0,cache:!0,trapFocus:!0,preserveFocus:!0}).then(function(){a()},function(){e.main.showToast("success","Deletion cancelled")})}}}}]),angular.module("app").controller("PostCategoryController",["$q","$scope","$rootScope","PostCategoryService","globals",function(e,t,n,o,r){t.allPostCategories=o.getAllPostCategories(),t.getAllPostCategories=function(){o.getAllPostCategoriesFromServer().success(function(e){t.allPostCategories=o.updateAllPostCategories(e.allPostCategories),n.main.responseStatusHandler(e)}).error(function(e){n.main.responseStatusHandler(e)})},t.getAllPostCategories(),n.$on("postCategoryChanges",function(){t.allPostCategories=o.getAllPostCategories()})}]),angular.module("app").directive("editPostDirectiveScope",["$filter","$rootScope","PostService","globals","$http","$interval","ngDialog",function(e,t,n,o,r,s,a){return{restrict:"AE",link:function(s,i,u){
function c(){function o(){s.postModel.allPostCategories=[],s.postModel.writers=[]}function i(){n.getCurrentEditPostModelFromServer(s.postIndex).success(function(e){t.main.responseStatusHandler(e),Object.keys(e.thePost).length>0?(s.postModel=e.thePost,s.postModel.step=1,o(),s.postModel.authorName=e.thePost.authorName,s.getAllPostCategories(),s.getAllWriters()):(s.postModel.step=1,o(),s.getAllPostCategories(),s.getAllWriters())}).error(function(e){o(),t.main.responseStatusHandler(e)})}s.postModel={allPostCategories:[],postUniqueCuid:"",postCategoryUniqueCuid:"",postHeading:"",postContent:"",postSummary:"",postTags:[],postUploads:[],postShortHeading:"",postHeaderImageKey:"",postType:"normal",authorUniqueCuid:p.uniqueCuid,writers:[],step:1},i(),s.getAllPostCategories=function(){r.post("/api/getPostCategories").success(function(e){t.main.responseStatusHandler(e),s.postModel.allPostCategories=e.postCategoriesArray}).error(function(e){t.main.responseStatusHandler(e)})},s.getAllWriters=function(){r.post("/api/getWriters").success(function(e){t.main.responseStatusHandler(e),s.postModel.writers=e.usersArray}).error(function(e){t.main.responseStatusHandler(e)})},s.previousStep=function(){s.postModel.step--,t.main.goToTop()},s.incrementStep=function(){s.postModel.step++,t.main.goToTop()},s.nextStep=function(e){1==parseInt(e)&&(0==s.postModel.postCategoryUniqueCuid.length?t.main.showToast("warning","Please select a category"):0==s.postModel.postType.length?t.main.showToast("warning","Please select the post type"):s.incrementStep()),2==parseInt(e)&&s.validateMainPostForm(!0)&&s.incrementStep(),3==parseInt(e)&&s.validateFinalizePostForm(!0)&&s.incrementStep()},s.validateMainPostForm=function(t){var n=0;return e("validatePostHeading")(s.postModel.postHeading,t)||n++,0==n&&(e("validatePostContent")(s.postModel.postContent,t)||n++),0==n&&(e("validatePostTags")(s.postModel.postTags,t)||n++),0==n},s.validateFinalizePostForm=function(n){var o=0;return 0==o&&(s.postModel.postHeaderImageKey&&0!=s.postModel.postHeaderImageKey.length||(o++,t.main.showToast("warning","Please select the header image"))),0==o&&(e("validatePostShortHeading")(s.postModel.postShortHeading,n)||o++),0==o&&(e("validatePostSummary")(s.postModel.postSummary,n)||o++),0==o},s.submitFinal=function(){s.validateMainPostForm(!0)?(s.incrementStep(),n.submitPostUpdate(s.postModel).success(function(n){var o=n.thePost;t.main.responseStatusHandler(n),t.main.redirectToPage("/post/"+e("getSlugUrl")(o))}).error(function(e){s.previousStep(),t.main.responseStatusHandler(e),t.main.goToTop()})):t.main.goToTop()},s.cancel=function(){a.openConfirm({template:"confirm_cancel_post_update",className:"ngdialog-theme-default",overlay:!0,showClose:!0,closeByEscape:!0,closeByDocument:!0,cache:!0,trapFocus:!0,preserveFocus:!0}).then(function(){t.main.redirectToPage("/post/"+e("getSlugUrl")(s.postModel))},function(){})}}function l(e){return r.post("/api/trashPost",{postUniqueCuid:e})}var p={};o.userDataFromServer().success(function(e){t.main.responseStatusHandler(e),e.userData?(p=e.userData,c()):t.main.redirectToLogin()}).error(function(e){t.main.responseStatusHandler(e)}),s.trashPost=function(){function e(e){l(e).success(function(e){t.main.responseStatusHandler(e),t.main.redirectToHome()}).error(function(e){t.main.responseStatusHandler(e)})}s.postModel.postUniqueCuid&&a.openConfirm({template:"/views/dialogs/confirm-trash-post.html",className:"ngdialog-theme-default",overlay:!0,showClose:!1,closeByEscape:!1,closeByDocument:!1,cache:!0,trapFocus:!0,preserveFocus:!0}).then(function(){e(s.postModel.postUniqueCuid)},function(){s.main.showToast("success","Deletion cancelled")})}}}}]),angular.module("app").directive("newPostDirectiveScope",["$filter","$rootScope","PostService","globals","$http","$interval","ngDialog",function(e,t,n,o,r,s,a){return{restrict:"AE",link:function(s,i,u){function c(){s.postModel={allPostCategories:[],postCategoryUniqueCuid:"",postHeading:"",postContent:"",postSummary:"",postTags:[],postUploads:[],postShortHeading:"",postHeaderImageKey:"",postType:"normal",authorUniqueCuid:l.uniqueCuid,writers:[],step:1},s.previousStep=function(){s.postModel.step--,t.main.goToTop()},s.incrementStep=function(){s.postModel.step++,t.main.goToTop()},s.nextStep=function(e){1==parseInt(e)&&(0==s.postModel.postCategoryUniqueCuid.length?t.main.showToast("warning","Please select a category"):0==s.postModel.postType.length?t.main.showToast("warning","Please select the post type"):s.incrementStep()),2==parseInt(e)&&s.validateMainPostForm(!0)&&s.incrementStep(),3==parseInt(e)&&s.validateFinalizePostForm(!0)&&s.incrementStep()},s.getAllPostCategories=function(){r.post("/api/getPostCategories").success(function(e){t.main.responseStatusHandler(e),s.postModel.allPostCategories=e.postCategoriesArray}).error(function(e){t.main.responseStatusHandler(e)})},s.getAllWriters=function(){r.post("/api/getWriters").success(function(e){t.main.responseStatusHandler(e),s.postModel.writers=e.usersArray}).error(function(e){t.main.responseStatusHandler(e)})},s.getAllPostCategories(),s.getAllWriters(),s.validateMainPostForm=function(t){var n=0;return e("validatePostHeading")(s.postModel.postHeading,t)||n++,0==n&&(e("validatePostContent")(s.postModel.postContent,t)||n++),0==n&&(e("validatePostTags")(s.postModel.postTags,t)||n++),0==n},s.validateFinalizePostForm=function(n){var o=0;return 0==o&&(s.postModel.postHeaderImageKey&&0!=s.postModel.postHeaderImageKey.length||(o++,t.main.showToast("warning","Please select the header image"))),0==o&&(e("validatePostShortHeading")(s.postModel.postShortHeading,n)||o++),0==o&&(e("validatePostSummary")(s.postModel.postSummary,n)||o++),0==o},s.submitFinal=function(){s.validateMainPostForm(!0)?n.submitNewPost(s.postModel).success(function(n){var o=n.thePost;t.main.responseStatusHandler(n),t.main.redirectToPage("/post/"+e("getSlugUrl")(o))}).error(function(e){s.previousStep(),t.main.responseStatusHandler(e),t.main.goToTop()}):t.main.goToTop()},s.cancel=function(){a.openConfirm({template:"confirm_cancel_new_post",className:"ngdialog-theme-default",overlay:!0,showClose:!0,closeByEscape:!0,closeByDocument:!0,cache:!0,trapFocus:!0,preserveFocus:!0}).then(function(){t.main.redirectToHome()},function(){})}}var l={};o.userDataFromServer().success(function(e){t.main.responseStatusHandler(e),e.userData?(l=e.userData,c()):t.main.redirectToLogin()}).error(function(e){t.main.responseStatusHandler(e)})}}}]),angular.module("app").directive("postContent",[function(){return{templateUrl:"post_content.html",scope:{postContent:"=model"},restrict:"AE",link:function(e){e.preparedPostContent=e.postContent,e.$watch("postContent",function(){e.preparedPostContent=e.postContent})}}}]),angular.module("app").directive("postTags",["$filter",function(e){return{templateUrl:"post_tags.html",scope:{postTags:"=model"},restrict:"AE",link:function(e,t,n){}}}]),angular.module("app").directive("headingMessages",["$filter",function(e){return{template:'<span class="form-error-notice" ng-show="showSpan()"><small ng-bind="postHeading | postHeadingMessages"></small></span>',restrict:"AE",scope:{postHeading:"=model"},link:function(t,n,o){t.showSpan=function(){return!e("validatePostHeading")(t.postHeading)}}}}]).directive("shortHeadingMessages",["$filter",function(e){return{template:'<span class="form-error-notice" ng-show="showSpan()"><small ng-bind="postShortHeading | postShortHeadingMessages"></small></span>',restrict:"AE",scope:{postShortHeading:"=model"},link:function(t,n,o){t.showSpan=function(){return!e("validatePostShortHeading")(t.postShortHeading)}}}}]).directive("contentMessages",["$filter",function(e){return{template:'<span class="form-error-notice" ng-show="showSpan()"><small ng-bind="postContent | postContentMessages"></small></span>',restrict:"AE",scope:{postContent:"=model"},link:function(t,n,o){t.showSpan=function(){return!e("validatePostContent")(t.postContent)}}}}]).directive("summaryMessages",["$filter",function(e){return{template:'<span class="form-error-notice" ng-show="showSpan()"><small ng-bind="postSummary | postSummaryMessages"></small></span>',restrict:"AE",scope:{postSummary:"=model"},link:function(t,n,o){t.showSpan=function(){return!e("validatePostSummary")(t.postSummary)}}}}]).directive("tagMessages",["$filter",function(e){return{template:'<span class="form-error-notice" ng-show="showSpan()"><small ng-bind="postTags | postTagsMessages"></small></span>',restrict:"AE",scope:{postTags:"=model"},link:function(t,n,o){t.showSpan=function(){return!e("validatePostTags")(t.postTags)}}}}]),angular.module("app").directive("postUploader",["$rootScope","globals","$http","Upload","$interval",function(e,t,n,o,r){return{templateUrl:"post_uploader.html",restrict:"AE",link:function(s,a,i){function u(){s.uploading.percent<100&&s.uploading.percent++}function c(t,n,r){o.upload({url:r.s3BucketUrl,method:"POST",fields:{key:r.key,AWSAccessKeyId:"AKIAJ3ODSBXFCLG7A6UA",acl:"public-read",policy:r.policy,signature:r.signature,"Content-Type":""!=n.type?n.type:"application/octet-stream",filename:n.name},file:n}).progress(function(e){s.uploading.percent=parseInt(100*e.loaded/e.total)}).success(function(t,o,a,i){e.main.responseStatusHandler(t),e.main.showToast("success","File successfully uploaded"),s.postModel.postUploads.push({type:"image",data:{originalname:n.name,amazonS3Url:r.completePath}}),s.hideProgressBars()}).error(function(t){e.main.showToast("warning","There was a problem uploading file. Please ensure that the file format is valid, and the file does not exceed the maximum allowed size"),console.log(t),s.hideProgressBars()})}function l(t,n,r){o.upload({url:r.s3BucketUrl,method:"POST",fields:{key:r.key,AWSAccessKeyId:"AKIAJ3ODSBXFCLG7A6UA",acl:"public-read",policy:r.policy,signature:r.signature,"Content-Type":""!=n.type?n.type:"application/octet-stream",filename:n.name},file:n}).progress(function(e){s.uploading.percent=parseInt(100*e.loaded/e.total)}).success(function(t,o,a,i){e.main.responseStatusHandler(t),e.main.showToast("success","File successfully uploaded"),s.postModel.postUploads.push({type:"pdf",data:{originalname:n.name,amazonS3Url:r.completePath}}),s.hideProgressBars()}).error(function(t){e.main.showToast("warning","There was a problem uploading file. Please ensure that the file format is valid, and the file does not exceed the maximum allowed size"),console.log(t),s.hideProgressBars()})}function p(t,n,r){o.upload({url:r.s3BucketUrl,method:"POST",fields:{key:r.key,AWSAccessKeyId:"AKIAJ3ODSBXFCLG7A6UA",acl:"public-read",policy:r.policy,signature:r.signature,"Content-Type":""!=n.type?n.type:"application/octet-stream",filename:n.name},file:n}).progress(function(e){s.uploading.percent=parseInt(100*e.loaded/e.total)}).success(function(t,o,a,i){e.main.responseStatusHandler(t),e.main.showToast("success","File successfully uploaded"),s.postModel.postUploads.push({type:"zip",data:{originalname:n.name,amazonS3Url:r.completePath}}),s.hideProgressBars()}).error(function(t){e.main.showToast("warning","There was a problem uploading file. Please ensure that the file format is valid, and the file does not exceed the maximum allowed size"),console.log(t),s.hideProgressBars()})}function d(t,n){g(t,n).progress(function(e){s.uploading.percent=parseInt(80*e.loaded/e.total)}).success(function(t,n,o,r){e.main.responseStatusHandler(t),s.postModel.postUploads.push({type:"image",data:t.fileData}),s.hideProgressBars()}).error(function(t){e.main.responseStatusHandler(t),s.hideProgressBars()})}function g(e,n){return o.upload({url:t.getLocationHost()+"/api/uploadPostImage",fields:e,file:n})}s.selectedFileType={type:"image"},s.isUploading=!1,s.uploading={show:!1,percent:0,status:"Uploading..."};var m;s.$watch(function(){return s.uploading.percent},function(e,t){80==e&&(s.uploading.status="Processing...",m=r(u,1e3))}),s.showUploading=function(){s.isUploading=!0,s.uploading.percent=0,s.uploading.status="Uploading",s.uploading.show=!0},s.hideProgressBars=function(){s.isUploading=!1,s.uploading.show=!1,s.uploading.status="Uploading",m&&r.cancel(m)},s.uploadDirect=function(t){if(t&&t.length){var o=t[0],r={};"image"===s.selectedFileType.type?(s.showUploading(),n.post("/api/getImagePolicy",{fileNameWithExtension:o.name}).success(function(t){e.main.responseStatusHandler(t),c(r,o,t)}).error(function(t){e.main.responseStatusHandler(t),s.hideProgressBars()})):"pdf"===s.selectedFileType.type?(s.showUploading(),n.post("/api/getPdfPolicy",{fileNameWithExtension:o.name}).success(function(t){e.main.responseStatusHandler(t),l(r,o,t)}).error(function(t){e.main.responseStatusHandler(t),s.hideProgressBars()})):"zip"===s.selectedFileType.type&&(s.showUploading(),n.post("/api/getZipPolicy",{fileNameWithExtension:o.name}).success(function(t){e.main.responseStatusHandler(t),p(r,o,t)}).error(function(t){e.main.responseStatusHandler(t),s.hideProgressBars()}))}},s.upload=function(e){if(e&&e.length){var t=e[0],n={};s.showUploading(),"image"===s.selectedFileType.type?d(n,t):"pdf"===s.selectedFileType.type?uploadPdf(n,t):"zip"===s.selectedFileType.type&&uploadZip(n,t)}}}}}]);
//# sourceMappingURL=app.min.js.map